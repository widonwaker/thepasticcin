<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
    <script type="text/javascript" charset="utf-8" src="cordova.js"></script>  
	<title>I Pasticcini</title>
    <style>
    @import url('https://fonts.googleapis.com/css?family=Carter+One'); //font-family: 'Carter One', cursive;
	@import url('https://fonts.googleapis.com/css?family=Skranji:700'); //font-family: 'Skranji', cursive;
	@import url('https://fonts.googleapis.com/css?family=Averia+Sans+Libre:300i'); //font-family: 'Averia Sans Libre', cursive;
    </style> 
    <link rel="stylesheet" href="css/style.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
</head>
<body style="background-image:url(img/bg.jpg); background-size: 100% 100%; background-repeat: no-repeat;">

<div class="moneybar">
   <img class="top-left-bar" src="img/money_base.png" />
   <img class="top-left-bar" src="img/money_inside.png" />
   <img class="empty" src="img/empty.png" />
   <div class="moneyscore brown" id="score">0</div>
</div>

<!--<a onclick="canc()">cancella</a>-->
<script>
function test() {
	localStorage.setItem("money_save",start);
	console.log(localStorage.getItem("money_save"));
}
function canc() {
	localStorage.removeItem("money_save");
}

var start = (localStorage.getItem("money_save")!==null) ? parseInt(localStorage.getItem("money_save")) : 1564654;
var speed = 1000;
$(document).ready(function () {
    go();
    setInterval(function () {
        go();
    }, speed);
});
function go() {
	if (start>9) $('.moneyscore').css("right", "1%");
	if (start>99) $('.moneyscore').css("right", "-1%");
	if (start>999) $('.moneyscore').css("right", "-4%");
	if (start>9999) $('.moneyscore').css("right", "-7%");
	if (start>99999) $('.moneyscore').css("right", "-10%");
	if (start>999999) $('.moneyscore').css("right", "-13%");
	if (start>9999999) $('.moneyscore').css("right", "-16%");
	if (start>99999999) $('.moneyscore').css("right", "-19%");
	if (start>999999999) $('.moneyscore').css("right", "-25%");
    $("#score").html(start.toLocaleString());
    start += 1;
}
</script>

<!--<p style="font-family: 'Carter One', cursive; font-size: 48px; -webkit-text-stroke: 2px green;">TEST</p>
<p style="font-family: 'Skranji', cursive; font-size: 48px">TEST</p>
<p style="font-family: 'Averia Sans Libre', cursive; font-size: 48px">TEST</p>-->

<script>
document.addEventListener("deviceready", onDeviceReady, false);
function onDeviceReady() {
	document.addEventListener("pause", onPause, false);	
	flexFont();
}

function onPause() {
	localStorage.setItem("money_save",start);
}
document.onunload = function () {
	localStorage.setItem("money_save",start);
}
</script>

<script>
var src = 'js/' + localStorage.getItem("deflang") + '.js';
var script = jQuery('<script/>').attr('src', src).appendTo('head');
</script>

<script>
flexFont = function () {
    var divs = document.getElementsByClassName("moneybar");
    for(var i = 0; i < divs.length; i++) {
        var relFontsize = divs[i].offsetWidth*0.09;
        divs[i].style.fontSize = relFontsize+'px';
    }
};

window.onload = function(event) {
    flexFont();
};
window.onresize = function(event) {
    flexFont();
};
</script>
</body>
</html>
